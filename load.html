<!DOCTYPE HTML>
<html>
<head>
    <title>Web Workers test page</title>
    <script src="js/jquery-1.4.2.min.js" type="text/javascript"></script>
    <script src="js/hash.js" type="text/javascript"></script>
    <script src="js/manager.js" type="text/javascript"></script>
    <script>
    $(function () {
        var open = window.indexedDB.open("iTunes", "iTunes sample db data");
        open.onsuccess = function(event) {
            var db = event.result;
            if (db.version != "1") {
                // User's first visit, initialize database.
                var createdObjectStoreCount = 0;
                var objectStores = [
                  { name: "tracks", keyPath: "id", autoIncrement: true },
                ];
             
                function objectStoreCreated(event) {
                  if (++createdObjectStoreCount == objectStores.length) {
                    db.setVersion("1").onsuccess = function(event) {
                        loadData(db);
                    };
                  }
                }
             
                for (var index = 0; index < objectStores.length; index++) {
                    var params = objectStores[index];
                    request = db.createObjectStore(params.name, params.keyPath,
                                                   params.autoIncrement);
                    request.onsuccess = objectStoreCreated;
                }
            }
            else {
              // User has been here before, no initialization required.
              loadData(db);
            }
        }
        
        function loadData(db) {
            
        }
        
        var fileInput = $('#fileInput');
        var loadBtn = $('#loadBtn');
    });
    </script>
</head>
<body>
    <h2>mrjs: load test data</h2>
    
    <p><input type="file" value="data" id="fileInput"/></p>
    <p><input type="button" value="Load" id="loadBtn"/></p>
    <output id="output"></output>
    
</body>
</html>
